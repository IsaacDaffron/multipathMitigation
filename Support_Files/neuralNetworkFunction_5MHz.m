function [Y,Xf,Af] = neuralNetworkFunction_5MHz(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 22-Feb-2019 10:57:19.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 35xQ matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.000312529186474667;0.000642628478524618;0.00121293890961592;0.0051505111660733;0.00339375340220438;0.00664561564137709;0.0108724438697889;0.00505879043783923;0.00369786108124287;0.000381912078110532;0.00240989658514144;0.0219681589622033;0.0463182982736213;0.199912428683575;0.384074740517773;0.483963142025678;0.559508153080384;0.649983921959679;0.579793839983814;0.472651074300319;0.341608754546228;0.105413058787643;0.0469200610395738;0.015574762465719;0.00667034556288379;0.00304278546619328;0.00216970803456935;0.00665521070002627;0.00754751677415477;0.00700011088025672;0.00864476456436849;0.00103627303670408;0.00291775144376149;0.000909949897948401;0.00116710047018098];
x1_step1.gain = [3.36370099333348;3.13958770938208;2.98109761687118;2.62450727668045;2.25881875105464;2.10495027086832;2.07388755951214;2.01251721980541;2.01580428448525;2.04593296104016;2.09261439471477;2.08007018675309;2.13513618050855;2.56335273230008;3.29373841702775;3.92114005458654;4.54046500369289;5.71402322772614;4.76018653758592;3.81714123257609;3.07060773998586;2.2733360602722;2.111415214874;2.04452696210683;2.05272412417445;2.0078387529465;2.04526097577346;2.04275955129448;2.02290561569322;2.09500021693091;2.32501321768182;2.76497026292432;3.69464062701878;4.43772869491083;3.86282035023393];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.2971404961523695931;-1.6600795743166181229;1.0029267276441138357;-1.2261539955463922613;0.068062773848404131694;0.27125988929346062095;-1.0420523906237357803;-0.037906001407512761314;-2.3306325800913305635;-0.12379146133249395445;-0.72767301263355532726;-0.28590102356594604416;1.7755593800969504681;-1.6595525849721890488;1.6559481013713011066];
IW1_1 = [0.27803760305026320454 0.34630127239977120945 -0.49404836507820071301 0.42413879117848113376 -1.0553630942890044331 -0.70728814705060949475 -0.67854957880100486012 -0.47596475242835395436 -0.6234599462759082833 0.050877080003659883034 1.6316025967804506092 0.91569837256126063174 -1.4008494337857453349 -0.62653478962160036314 1.0178820807143280636 0.18035486872982242623 -0.59984145291067081374 -0.59074817663236522947 0.652991389694630886 0.70010159203959865248 -0.082579594857426191767 -0.45771568707561066658 -1.2030339365344255853 -0.81510139445360074717 1.8967072852541475569 0.085321135958477539729 0.21744957404841153137 -0.055075245251105298117 -0.24579445355584136901 -0.25911040439924343248 0.49961560966944301709 0.024383972957239225671 0.41593274246276257244 0.24061384795586876484 -0.34309075918832521168;0.3609556419281427786 0.12748467713949895863 0.35354713745283766757 -0.12737306970738315748 -0.67820070639915841504 -0.98474383501078788239 -0.71412076946722780058 -0.067002128174832420449 0.065820627345068632996 0.67143260752825462134 0.73733383367006344322 0.3397616209794255826 -0.059858815987593898267 -0.11170657399529583531 0.1297584482190387023 0.018182084809866390362 -0.030380388300517001399 0.25835940387733075108 -0.3881579025763213231 -0.43548406504712250387 -0.30710461729104893136 -0.88936521756405295669 0.16928626326240098221 0.089013721074666846134 0.16114773238843535519 0.31901010504522242517 0.19834082798832827765 0.29149147730370511544 -0.2788332837543618381 -0.29770023228551079075 0.35862534703389098434 0.21533121912929531483 0.045063393397518816674 0.83971431285718622917 0.45611922987795189277;-0.38648189364275470359 -0.40891227201882407449 -0.40786131716543022607 -0.088766341773698798079 -0.20112010868579938139 0.91296251662545369054 0.92992061926769709057 0.40517893067525545536 0.1894032630989336552 0.33204685452194548922 0.63127386917196126603 1.143888024667542691 0.33910078128107939976 0.011645362179428200844 -0.66376836276525330582 0.051658684174635267905 -0.15409806357721761438 0.99145666736030813038 0.60438992991075835004 -0.085600036372494553438 0.20486459476148480285 0.25283029032332932085 0.058378800869313463018 -0.63169986047240644922 0.090606275392059704155 -0.64917370119745021473 0.30710776723755395246 0.56000880830082222506 0.16875636189318143909 -0.17641106261486427798 -0.63375908349111831352 0.011586332077318808875 0.11247955212696324201 0.34529982489254729128 -0.64910165182815959817;-0.66937515531331670537 0.14039175884523799609 0.1779456363047060008 0.067799633197208344915 0.15887071284903875323 -0.32844420067873703051 -0.027516328989010019335 -0.32255869126299963057 -0.3296570774043042773 0.15430651881220491806 -0.40425272151064023385 -0.25072709987659863584 0.20208190883697899065 -0.48638443308099221785 0.010861084732026238253 -0.79879755031374455321 -0.47289461681682526395 -0.4643473443355514152 0.26100755603145908701 0.059554748802050319623 0.37302429075111442902 0.79885014486483130192 0.15024491018853805557 0.38087561989235191318 0.10479745548631566598 -0.75202941904955533658 0.35994650269384714791 -0.0020109741131454916818 0.0098677115292645847799 0.061811808540901402864 -0.15520856495627474714 0.21532503167191471838 -0.34337922590991776239 -1.5040277090005795824 0.82291387495297219079;-0.34310511995326686829 -0.50263478397393901442 0.20432291325758858425 0.43128235181625607098 0.28420051589073924703 -0.16512860096172551905 0.29610445870107737765 -0.12479077669831606379 0.40679817969664777699 -0.002065223381965399993 -0.21433862294054512043 -0.077763526900796978159 -0.46127498851740034169 0.34510309879905787245 -0.051524206340856325281 -1.1422587587612349491 -0.26302974354551356129 -0.03420314797401421969 0.82788613369241015327 0.44946731060100186816 0.55052117931610444757 -0.0048218350251135085049 -0.47204041446815298011 -0.2071785512266636764 -0.60685059568097632354 0.28456589107829965979 0.35656073800761317605 0.60265733371554441877 -0.051990547526113539689 -0.045162174950026945375 -0.20679707378287648378 -0.2264669297500515599 0.80620475069198405116 0.0046506576856091413896 0.60797515794752721163;0.42609372858935651296 0.78518065693883509759 0.8796753645077436401 0.098430167291262610219 0.90770877656889092933 0.33214454673148208208 0.60572109667528373222 -0.064068229910303836627 -0.071481285950278777852 -0.026201856843215159953 -1.0650765269096638121 -0.57837368846679548806 -0.49089250337215378783 -0.2480608662406755538 -0.063999883403922042113 0.095114837606398078274 -0.16680544779080108686 0.3498773403021825934 -0.49298149629752241463 0.1564289160793137512 -0.3246285295681184957 -0.46500232076929859382 0.003385225845939736182 -0.073558959789611452762 -3.3567954305258052017e-05 0.57576532219030140958 0.73535070274642333477 0.56156861837840121865 0.38850941890370105369 0.62989497376435399367 -0.093897137450315845686 -0.026104053692400486231 0.01701410376298048005 -0.054359178309498892845 -0.79958679495674089832;0.33015759444829068103 0.1869886176946340961 -0.7814861537155607385 0.77441375925721134266 -0.3774466624217677202 -1.3315374792572989282 -0.055601204433191150911 0.041984542488357562418 -0.43265594329858803047 -0.50785014969156505593 -2.1200603253347991561 -0.52668210199833531693 -0.19460909940141107866 0.60405354200036398549 -0.58922307574017673826 -0.2363472164203093695 0.23728735757255056682 0.32144563178258500624 -0.21263875458512793148 -0.14725306741592333881 0.64375640057474003974 -0.51792712486746506073 -0.55657499584648228996 0.2801730452522539494 0.073182285742932409733 0.75558426133294609439 0.89774142802995215984 1.1509515915815320408 -0.52462869294803959885 -1.1257643147007674322 -0.38381798819677165335 0.89137276254516117913 -0.3350727225169642387 0.36671552494117543031 0.050583168126995523006;0.28722383790649325119 0.45639392866613831545 0.34868766050357730135 0.72061005917861331582 -0.094269328468352869832 0.012820768621443757312 -0.21506491981339345698 -0.55987192426899634601 -0.5394509429063031325 -0.026529820803331938261 -0.27341780829803130626 -0.84973514755811330179 0.37649000310311564466 0.5062211590408809414 0.64581155388142719165 0.30729527348681090482 0.35799757207001292603 0.35886482000274561033 0.25099683776497255794 0.031235191597062922364 -0.19854288966135466565 -0.1324000740723211833 0.040897872096799396668 -0.19789395889288585728 -0.24263694820091671889 0.32100634599447519513 -0.0093754891426472974914 -0.00065869283515462622933 -0.71184560079422642964 -0.272793937567291922 -0.50056565502741490192 0.079658722834228770648 -0.50538069281313457992 -0.19893436003044609461 0.45506236330554689085;-0.87627244337471899005 0.021732557202494173776 0.81134553836002365479 0.38640708816233781953 -1.7851578150591072003 -0.4098357193607765625 0.39026363881979869719 1.3805146193353059481 2.5687371846617166327 2.1214188033563976532 0.041394112603886951129 -0.084329089106050678093 -0.74561319609593701419 -1.6095143784826269062 -0.72421253324238410443 0.21917309878089794029 1.7511358978083708671 1.4571369751446268115 -0.31310190699677403758 -2.0171145547143751742 -1.5063935527116067981 -0.46291766360363911792 1.4853791394696420625 0.24243900829311446077 -1.4662788636062860093 -0.7302203895241095033 -1.187339114080296687 -1.3367024143928474267 -0.6212459043328890651 0.20186284005931093288 0.24425878993096530878 0.35967460138233120492 -0.36646676728940497103 -0.61444533896940634055 -0.02933723507286706278;-0.61455103830115975772 -0.14491507851323245926 -0.46870844372360503938 -0.18744570068823535047 0.43224749141744100989 0.27928112141359945353 0.35936679613146638168 0.4783240435701971438 -0.3839127331176317437 -0.8125833310068990567 -0.60005774280598300763 0.23856429825572655901 0.49932857494004984078 0.38992088075679820491 0.24668091557487323295 -0.17948019729502084907 -0.35873437384500672653 -0.34564199338406809137 -0.25731729557114702001 0.13316399044644394722 0.28644532652196974531 -0.23084393173526795984 0.079532657524924235681 -0.424442245233241644 -0.01454038118287809267 0.29343240213780569237 -0.76658959779186397476 -0.20143549824293455197 0.096708966300393189863 -0.51897675774945339899 -0.26342566507525383424 0.69618321258373350169 -0.43002842814194813803 -0.81252221905716892625 0.68686580665953400615;-0.54858664077829988326 0.048394115385171694588 -0.1383331041262484129 -0.058627914819660481571 -0.45679188815736609941 0.46926687471703654175 0.390289871559936552 0.043548154053580021006 -0.66954897905178856199 0.067566591274188958494 -1.0342329025061944847 0.30177829853834836626 1.0567105672248038317 0.041298948700081945795 0.067721841066301691203 -0.010963734331077681916 -0.81834677723968818341 -0.03533182103717428385 0.84948868515164599469 -0.021954352311692702793 -0.73029394034005989944 0.20471976128248209337 -0.11853421329630789427 -0.026017048783990151528 0.33580826298578564382 -0.84952090529166457422 0.088531963839601018895 0.15639415559389863164 -0.3035243265292528192 -0.14148989198241326837 0.027085004435733577022 -0.2517360215780417021 0.050411028408755650942 -0.038727222615237269499 0.19464817285880162134;-0.042052902632057659327 0.79687810397018410402 0.77416571095858988105 -0.60710575717285519826 -1.0646814727455549132 -1.0151534081998472292 -0.85552536884101382242 -0.59411705714374885012 0.22879526501091676516 0.68318451200691943104 -0.13039359591076812861 0.11869966788818996084 0.53648610147982855878 0.48293534802433030206 0.35599898356570092162 -0.12649874370839492288 -0.4269323583482544926 -0.078227949428182411151 -0.56773284395953971249 -0.15671191902137360241 0.35119154660247753341 0.40897829975017324644 0.24941498413535262424 0.88733662380681865844 0.58428661493231026647 -0.92130321139381210482 -0.85586911369127216531 -0.61219742472931593102 0.097414653983372984092 -0.020679542134545543519 0.15594846377170140661 0.80140842905546250119 0.35844185155755770023 -1.0844473744605584997 0.19418745591242850268;0.46384586770135433076 -0.14454428931651924772 -0.18974554510872410074 -0.028353174538515532599 0.079313942600524683924 0.24356811397184402468 -0.43309871398764598904 -0.06584706000424148109 0.39012003807391926191 -0.16176588317307005749 0.88502819154710343774 -0.5473753871416735528 0.14362269473521657726 -0.57872148745067619746 0.020891963220900380827 0.68972269825473353499 -0.26602394668510764841 -0.0066527615295561143283 0.1709548066024445534 -0.49748171027129595156 0.063758909657350287814 0.49180802731444989151 0.14709504882370955103 -0.82314845421968330097 0.091854416167427760387 0.96035086547554682213 0.082198216165541557188 -0.21103979620369581194 0.33457413122030876806 -0.45726811351576757136 -0.18968161515980291876 0.91647600967276621198 -0.11457611670520395641 0.40254117215607260194 -0.22486379364942138404;-0.14611915612959439081 0.60001544589457234125 0.3060246390481629053 0.35600608537563060985 -0.49018626846422136412 -0.34459250513609296362 -0.64840773137510743229 -0.38916658835358569624 -0.43380029807015313414 -0.56703960439549483397 -0.07849038010558870293 -0.029428364519532086013 -0.22935729960915124392 0.043880286276336513684 0.31425323446724279242 0.62345093966846398814 -0.57960232745694817424 -0.36909427961312535338 -0.047877935216185441014 0.14276794612147275521 0.23842612019870743079 0.16246798600868583851 -0.0014848402270806124181 0.096084574312347820202 0.42370339944260626552 -1.0188068913339394239 0.50687484625445600184 -0.27418683584232506067 0.078139492045706290813 -0.62293774800854095908 -0.020635762535669215784 0.33835247762426690077 0.27627128936417288951 -0.38737241536449673607 0.41150072722500485867;0.28691726231908237787 -0.36087654313165201669 -0.44071337163820012428 0.074084664650838238931 -0.32676092472645201781 -0.19069802922818601676 0.038844039436017940847 0.27461895122800439317 0.45612972412088992336 0.21600665958212322826 0.099345735337960733302 -0.6772852016646631057 -0.61412410368566117125 -0.4220186543362675069 0.011831391059131640686 0.25117031509854764737 0.25817622383884941684 -0.22557060211632407043 -0.29352528171668568202 0.036409730163931688929 -0.2246742608061645663 0.8418524468000573302 0.58108989230080354549 -0.13236609788107067676 0.0037639783099397555732 -0.10833127607053494312 0.25982436473089842721 -0.040407829439962544837 0.3600921708632509044 0.33858524582699900396 0.40233263669844199217 -0.38237254004167336996 -1.233380753460881385 0.1773139569548441985 0.19545894805266700311];

% Layer 2
b2 = 0.72130052904102870404;
LW2_1 = [0.37098442503829487382 -0.43452166833236771648 -0.20590055052642855515 -0.21276279380765361626 0.2384139479822171559 -0.065205308146582485751 0.36694025783422012932 0.067659256183111471383 -0.27899122958915223425 0.27881949333403954761 -0.65326501745073906058 0.14184197005287235704 -1.1273578761539626569 -0.41720685473764929085 -1.0015234086638697963];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.138750895176338;
y1_step1.xoffset = 7.76665017862979;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},2); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
